<!--
🚫 DO NOT EDIT THIS FILE.
This AGENT.md defines core Codex responsibilities and must remain stable.
Stack-specific variations belong in /tech-guides/{platform}.md
-->

# AGENT.md – Frontend Contributing Guidelines

Welcome! This document defines how to contribute to our frontend codebase (e.g., React, Vue, Flutter, Svelte, Angular). All contributions must follow component-driven architecture, test-first development, and strict task alignment.

> 📘 For global Codex rules, see [`/AGENT.md`](../AGENT.md).  
> 📚 For system-wide task specs, architecture principles, and GPT collaboration rules, see [`/ENGINEERING_GUIDE.md`](../ENGINEERING_GUIDE.md).

## 👥 Project Structure & Roles

This repository has two main folders:

* `/backend` – owned by The Architect (Backend GPT)
* `/frontend` – owned by The Polyglot (Frontend GPT)

The AI-first software engineer works with these GPTs to define features. You receive specs from either GPT, never invent flows, and always write tested, production-ready code.

Use tasks from The Polyglot for frontend UI and The Architect for backend logic. All commits must stay within task scope.

## 🔧 Architecture

Our frontend is located under the `/frontend` directory and follows a component-driven architecture with shared logic across platforms:

```
/frontend/web         → Web apps (React, Vue, Svelte, Angular)
/frontend/mobile      → Mobile apps (React Native, Flutter)
/frontend/shared      → Shared hooks, types, schemas, utilities
```

* Screens and components use shared logic via hooks and services.
* Shared logic must remain platform-neutral and testable.

## 🧠 Codex Rules

* Follow tasks from The Polyglot exactly.
* Do NOT invent props, flows, or UI.
* Use validation schemas, tokens, and patterns as defined.

### 🔍 Preflight Verification Rule

Before assigning or implementing a task, always verify if the functionality already exists:

✅ **Checklist**

* [ ] Search `/web/`, `/mobile/`, and `/shared/` for existing logic
* [ ] Check for matching schema or component in `schemas/` or `components/`
* [ ] Confirm presence or absence via test files
* [ ] If legacy or partial code exists: refactor or extend, do NOT duplicate

Use this checklist before every Codex Task to avoid redundant or conflicting implementations.

---

## 🧾 Task Tracker Enforcement Rule

All Codex tasks must **update `/codex_task_tracker.md`** when a task is:

✅ Completed
⏳ In Progress (partially implemented)

### Required Fields:

* **Task Title**
* **Phase:**
* **Layer(s):** ui, state, hooks, form, api, routing, etc.
* **Status:** ✅ Done, ⏳ In Progress
* **Context:** frontend
* **Notes:** Design link, integration notes, blockers, merge status, etc.
* **Created date:**
* **Updated date:**

⚠ Codex must write to `codex_task_tracker.md` using native TypeScript automation.
For frontend projects, use the utility:
`/frontend/utils/taskLogger.ts` → `updateTaskTracker()` and `hasDuplicateTask()`
→ Prevents duplicate task rows and maintains consistent structure.

This guarantees global visibility, traceability, and memory sync between GPT, Codex, and all contributors.

> Logging to `codex_task_tracker.md` is a **mandatory post-task step** for every frontend feature.

---

## 📊 Tasks from The Polyglot

All implementation must follow the task spec format:

* Component, screen, or utility name
* Platform: `web`, `mobile`, or `shared`
* Props and validation rules
* Styling instructions (tokens, variants)
* Behavior and interaction logic
* Routing if applicable
* Required test coverage

You may NOT change scope or invent behavior without approval.

## ✅ Commits & PRs

* One PR = one feature or fix.
* Use Conventional Commits:

  * `feat(web): add RefillCard`
  * `fix(mobile): fix safe area bug`
* Keep commits atomic and scoped.

## 🧪 Testing

All components, hooks, and logic must be covered with framework-specific tools:

* React: `Jest`, `RTL`
* Vue: `Vitest`, `Vue Test Utils`
* Flutter: `flutter_test`, `mockito`
* Svelte: `svelte-testing-library`

Tests must cover:

* Render paths
* Valid/invalid input
* Edge cases and states
* Async/mutation outcomes

Place test files beside source files.

## 🔐 Styling

* Follow tokens defined in `/shared/theme.ts`, `theme.dart`, or per-platform config
* Never hardcode layout, color, spacing, or typography
* Maintain accessibility: labels, roles, focus, contrast, safe areas

## 🗖️ Shared Code

* Business logic lives in `/shared/`
* Do NOT import from `react-native`, `next/router`, or other platform-specific packages in shared files
* All shared exports must be:

  * Platform-agnostic
  * Type-safe
  * Fully tested

## 🚫 DO NOT

* Write speculative or unassigned code
* Push incomplete or untested logic
* Mix platform logic into `/shared`
* Fetch data directly in components/screens

## ✅ YOU MUST

* Follow assigned tech guide (`/tech-guides/{platform}.md`)
* Use `Zod`/`Yup` for validation
* Adhere to TDD: tests before implementation
* Respect stack boundaries
* Commit clean, reviewed, tested code

## 🚦 CI Blocks:

* Failing or skipped tests
* Raw fetch in UI
* Invalid or missing types
* Breaking test coverage

---

## 🧾 Codex Task Template

Use this format for all frontend tasks:
```
💻 Codex Task: [Component / Screen / Hook / Utility]
🧭 Context: frontend | shared
📁 Platform: [web | mobile | shared | vue | angular | svelte]
🎯 Objective: [What the feature does or enables]

🧩 Specs:
- Props / Inputs: [...]
- UI Design: [Tailwind / Dripsy / scoped CSS / native]
- Behavior: [...]
- Validation: [Zod/Yup schema]
- Data: [API hook / props / context]
- Routing (if any): [...]

🧪 Tests:
- Validate all props and edge cases
- Simulate interactions (click, tap, swipe)
- Confirm correct fetch/mutate/navigation

📦 **Codex Must Follow**:

* File and folder conventions
* TDD-first flow
* Zod + react-hook-form where applicable
* Platform-specific `tech-guides/*.md` and `/frontend/AGENT.md`

⛔ Codex Must NOT:

* Invent logic or behavior
* Skip tests or leave TODOs
* Call APIs directly in UI
* Mix platform code into `/shared/`
```

All platform-specific rules live in `/frontend/tech-guides/{platform}.md` — where `{platform}` is one of `web`, `mobile`, or `shared`. For implementation-level guidance on specific stacks (React, Vue, Flutter, Angular, etc.), refer to their respective files within `/frontend/tech-guides/`. See `/frontend/tech-guides/README.md` for how these guides are structured and maintained. This `AGENT.md` governs Codex execution across all frontend technologies.


